---
const apiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY;
---

<section id="contact" class="min-w-screen w-full flex flex-col items-center py-2 px-2">
    <h4 class="text-4xl font-bold text-blue-100">Contactame</h4>
    <p class="text-blue-200 mb-4">No toques el mapa</p>
    <div class="flex flex-col sm:flex-row mb-4 sm:gap-8 items-center justify-center sm:p-4 rounded-md" id="contact2">
        <div class="w-full max-h-[50rem] aspect-square relative mb-4 sm:mb-0">
            <div class="absolute w-full h-full"  id="iFrameContainer"></div>
            <iframe
                width="100%"
                height="100%"
                style="border:0"
                loading="lazy"
                allowfullscreen
                referrerpolicy="no-referrer-when-downgrade"
                src=`https://www.google.com/maps/embed/v1/place?key=${apiKey}
                &q=php`
                id="map"
                >
            </iframe>
            <iframe
                width="100%"
                height="100%"
                style="border:0"
                loading="lazy"
                allowfullscreen
                referrerpolicy="no-referrer-when-downgrade"
                src=`https://tbot.xyz/lumber/`
                id="lumberjack"
            >
            </iframe>
            
        </div>
        <div class="w-full sm:h-full p-4 rounded form">
            <form action="https://formspree.io/f/xvgoqeyn" method="POST" class="w-full" target="_blank">
                <label for="name" class="text-blue-200">Nombre</label>
                <input type="text" name="name" id="name" class="w-full rounded-md p-2 mb-4">
                <label for="email" class="text-blue-200">Email</label>
                <input type="email" name="email" id="email" class="w-full rounded-md p-2 mb-4">
                <label for="message" class="text-blue-200">Mensaje</label>
                <textarea name="message" id="message" class="w-full rounded-md p-2 mb-4"></textarea>
                <button type="submit" class="bg-blue-500 text-blue-100 p-2 rounded-md w-full">Enviar</button>
            </form>
        </div>
    </div>
</section>
<style>
    .form{
        background: #84b0ee5d;
    }
    #lumberjack{
        display: none;
    }
    #contact2{
        background: #84b0ee5d;
    }
</style>
<script>
    const map = document.getElementById('map');
    const lumberjack = document.getElementById('lumberjack');
    const iFrameContainer = document.getElementById('iFrameContainer');
    
    iFrameContainer?.addEventListener('click', () => {
    if (map) {
        map.remove();
        iFrameContainer.remove();
    }
    
    if (lumberjack) {
        lumberjack.style.display = 'block';
    }
});
</script>